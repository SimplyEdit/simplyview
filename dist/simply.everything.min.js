(()=>{var Ae=Object.defineProperty;var S=(t,e)=>{for(var n in e)Ae(t,n,{get:e[n],enumerable:!0})};var v=new Map,ae={addListener:(t,e)=>{v.has(t)||v.set(t,[]),v.get(t).push(e),Ee(t)},removeListener:(t,e)=>{if(!v.has(t))return!1;v.set(t,v.get(t).filter(n=>n!=e))}};function Ee(t){let e=document.querySelectorAll('[data-simply-activate="'+t+'"]');if(e)for(let n of e)oe(n)}function oe(t){let e=t?.dataset?.simplyActivate;if(e&&v.has(e))for(let n of v.get(e))n.call(t)}function Le(t){let e=[];for(let r of t)if(r.type=="childList"){for(let s of r.addedNodes)if(s.querySelectorAll){var n=Array.from(s.querySelectorAll("[data-simply-activate]"));s.matches("[data-simply-activate]")&&n.push(s),e=e.concat(n)}}for(let r of e)oe(r)}var Se=new MutationObserver(Le);Se.observe(document,{subtree:!0,childList:!0});var H={};S(H,{actions:()=>j});function j(t){if(t.app){let e={get:(n,r)=>n[r].bind(t.app)};return new Proxy(t.actions,e)}else return t}var K={};S(K,{routes:()=>U});function U(t){return new R(t)}var R=class{constructor(e={}){this.root=e.root||"/",this.app=e.app,this.clear(),e.routes&&this.load(e.routes)}load(e){Me(e,this.routeInfo)}clear(){this.routeInfo=[],this.listeners={match:{},call:{},finish:{}}}match(e,n){let r={path:e,options:n};r=this.runListeners("match",r),e=r.path?r.path:e;let s;if(!e)return this.match(document.location.pathname+document.location.hash)?!0:this.match(document.location.pathname);e=A(e);for(let l of this.routeInfo)if(s=l.match.exec(e),s&&s.length){var i={};return l.params.forEach((a,o)=>{a=="*"&&(a="remainder"),i[a]=s[o+1]}),Object.assign(i,n),r.route=l,r.params=i,r=this.runListeners("call",r),i=r.params?r.params:i,r.result=l.action.call(l,i),this.runListeners("finish",r),r.result}return e&&e[e.length-1]!="/"?this.match(e+"/",n):!1}runListeners(e,n){if(Object.keys(this.listeners[e]))return Object.keys(this.listeners[e]).forEach(r=>{var s=ce(r);if(s.exec(n.path)){var i;for(let l of this.listeners[e][r])i=l.call(this.app,n),i&&(n=i)}}),n}handleEvents(){globalThis.addEventListener("popstate",()=>{this.match(A(document.location.pathname+document.location.hash,this.root))===!1&&this.match(A(document.location.pathname,this.root))}),globalThis.document.addEventListener("click",e=>{if(!e.ctrlKey&&e.which==1){for(var n=e.target;n&&n.tagName!="A";)n=n.parentElement;if(n&&n.pathname&&n.hostname==globalThis.location.hostname&&!n.link&&!n.dataset.simplyCommand){let r=A(n.pathname+n.hash,this.root);if(this.has(r)||(r=A(n.pathname,this.root)),this.has(r)){let s=this.runListeners("goto",{path:r});return s.path&&this.goto(s.path),e.preventDefault(),!1}}}})}goto(e){return history.pushState({},"",Ce(e)),this.match(e)}has(e){e=A(e,this.root);for(let r of this.routeInfo){var n=r.match.exec(e);if(n&&n.length)return!0}return!1}addListener(e,n,r){if(["goto","match","call","finish"].indexOf(e)==-1)throw new Error("Unknown action "+e);this.listeners[e][n]||(this.listeners[e][n]=[]),this.listeners[e][n].push(r)}removeListener(e,n,r){if(["match","call","finish"].indexOf(e)==-1)throw new Error("Unknown action "+e);this.listeners[e][n]&&(this.listeners[e][n]=this.listeners[e][n].filter(s=>s!=r))}init(e){e.root&&(this.root=e.root)}};function A(t,e="/"){return(t.substring(0,e.length)==e||e[e.length-1]=="/"&&t.length==e.length-1&&t==e.substring(0,t.length))&&(t=t.substring(e.length)),t[0]!="/"&&t[0]!="#"&&(t="/"+t),t}function Ce(t,e){return t=A(t,e),e[e.length-1]==="/"&&t[0]==="/"&&(t=t.substring(1)),e+t}function ce(t){return new RegExp("^"+t.replace(/:\w+/g,"([^/]+)").replace(/:\*/,"(.*)"))}function Me(t){let e=[],n=Object.keys(t),r=/:(\w+|\*)/g;for(let s of n){let i=[],l=[];do i=r.exec(s),i&&l.push(i[1]);while(i);e.push({match:ce(s),params:l,action:t[s]})}return e}var V={};S(V,{commands:()=>F});var z=class{constructor(e={}){e.app||(e.app={}),e.app.container||(e.app.container=document.body),this.$handlers=e.handlers||Ne,e.commands&&Object.assign(this,e.commands);let n=r=>{let s=Be(r,this.$handlers);if(!s)return;if(!this[s.name]){console.error("simply.command: undefined command "+s.name,s.source);return}if(this[s.name].call(e.app,s.source,s.value)!==!0)return r.preventDefault(),r.stopPropagation(),!1};e.app.container.addEventListener("click",n),e.app.container.addEventListener("submit",n),e.app.container.addEventListener("change",n),e.app.container.addEventListener("input",n)}};function F(t={}){return new z(t)}function Be(t,e){var n=t.target.closest("[data-simply-command]");if(n){for(let r of e)if(n.matches(r.match))return r.check(n,t)?{name:n.dataset.simplyCommand,source:n,value:r.get(n)}:null}return null}var Ne=[{match:"input,select,textarea",get:function(t){if(t.tagName==="SELECT"&&t.multiple){let e=[];for(let n of t.options)n.selected&&e.push(n.value);return e}return t.dataset.simplyValue||t.value},check:function(t,e){return e.type=="change"||t.dataset.simplyImmediate&&e.type=="input"}},{match:"a,button",get:function(t){return t.dataset.simplyValue||t.href||t.value},check:function(t,e){return e.type=="click"&&e.ctrlKey==!1&&e.button==0}},{match:"form",get:function(t){let e={};for(let n of Array.from(t.elements)){if(n.tagName=="INPUT"&&(n.type=="checkbox"||n.type=="radio")&&!n.checked)return;e[n.name]&&!Array.isArray(e[n.name])&&(e[n.name]=[e[n.name]]),Array.isArray(e[n.name])?e[n.name].push(n.value):e[n.name]=n.value}return e},check:function(t,e){return e.type=="submit"}},{match:"*",get:function(t){return t.dataset.simplyValue},check:function(t,e){return e.type=="click"&&e.ctrlKey==!1&&e.button==0}}];var G={};S(G,{keys:()=>W});var D=class{constructor(e={}){e.app||(e.app={}),e.app.container||(e.app.container=document.body),Object.assign(this,e.keys);let n=r=>{if(r.isComposing||r.keyCode===229||r.defaultPrevented||!r.target)return;let s="default";r.target.closest("[data-simply-keyboard]")&&(s=r.target.closest("[data-simply-keyboard]").dataset.simplyKeyboard);let i="";r.ctrlKey&&r.keyCode!=17&&(i+="Control+"),r.metaKey&&r.keyCode!=224&&(i+="Meta+"),r.altKey&&r.keyCode!=18&&(i+="Alt+"),r.shiftKey&&r.keyCode!=16&&(i+="Shift+"),i+=r.key,this[s]&&this[s][i]&&this[s][i].call(e.app,r)};e.app.container.addEventListener("keydown",n)}};function W(t={}){return new D(t)}var ee={};S(ee,{batch:()=>Z,clockEffect:()=>$e,destroy:()=>Y,effect:()=>M,signal:()=>w,throttledEffect:()=>_,untracked:()=>Ie});var J=Symbol("iterate");Symbol.xRay||(Symbol.xRay=Symbol("xRay"));var Oe={get:(t,e,n)=>{if(e===Symbol.xRay)return t;let r=t?.[e];return Q(n,e),typeof r=="function"?Array.isArray(t)?(...s)=>{let i=t.length,l=r.apply(n,s);return i!=t.length&&E(n,T("length",{was:i,now:t.length})),l}:t instanceof Set||t instanceof Map?(...s)=>{let i=t.size,l=r.apply(t,s);return i!=t.size&&E(n,T("size",{was:i,now:t.size})),["set","add","clear","delete"].includes(e)&&E(n,T({entries:{},forEach:{},has:{},keys:{},values:{},[Symbol.iterator]:{}})),l}:t instanceof HTMLElement||t instanceof Number||t instanceof String||t instanceof Boolean?r.bind(t):r.bind(n):r&&typeof r=="object"?w(r):r},set:(t,e,n,r)=>{n=n?.[Symbol.xRay]||n;let s=t[e];return s!==n&&(t[e]=n,E(r,T(e,{was:s,now:n}))),typeof s>"u"&&E(r,T(J,{})),!0},has:(t,e)=>{let n=y.get(t);return n&&Q(n,e),Object.hasOwn(t,e)},deleteProperty:(t,e)=>{if(typeof t[e]<"u"){let n=t[e];delete t[e];let r=y.get(t);E(r,T(e,{delete:!0,was:n}))}return!0},defineProperty:(t,e,n)=>{if(typeof t[e]>"u"){let r=y.get(t);E(r,T(J,{}))}return Object.defineProperty(t,e,n)},ownKeys:t=>{let e=y.get(t);return Q(e,J),Reflect.ownKeys(t)}},y=new WeakMap;function w(t){return y.has(t)||y.set(t,new Proxy(t,Oe)),y.get(t)}var q=new Set,C=0;function E(t,e={}){let n=[];if(e.forEach((r,s)=>{let i=Pe(t,s);if(i?.length){for(let l of i)qe(l,T(s,r));n=n.concat(i)}}),n=new Set(n.filter(Boolean)),n)if(C)q=q.union(n);else{let r=g[g.length-1];for(let s of Array.from(n))s!=r&&s?.needsUpdate&&s(),ue(s)}}function T(t,e){let n=new Map;if(typeof t=="object")for(let r in t)n.set(r,t[r]);else n.set(t,e);return n}function qe(t,e){t.context?e.forEach((n,r)=>{t.context.set(r,n)}):t.context=e,t.needsUpdate=!0}function ue(t){delete t.context,delete t.needsUpdate}function Q(t,e){let n=g[g.length-1];n&&xe(t,e,n)}var N=new WeakMap,O=new WeakMap;function Pe(t,e){let n=N.get(t);return n?Array.from(n.get(e)||[]):[]}function xe(t,e,n){N.has(t)||N.set(t,new Map);let r=N.get(t);r.has(e)||r.set(e,new Set),r.get(e).add(n),O.has(n)||O.set(n,new Map);let s=O.get(n);s.has(e)||s.set(e,new Set),s.get(e).add(t)}function x(t){let e=O.get(t);e&&e.forEach(n=>{n.forEach(r=>{let s=N.get(r);s.has(n)&&s.get(n).delete(t)})})}var g=[],P=[],X=new WeakMap,k=[];function M(t){if(P.findIndex(r=>t==r)!==-1)throw new Error("Recursive update() call",{cause:t});P.push(t);let e=y.get(t);e||(e=w({current:null}),y.set(t,e));let n=function r(){if(k.findIndex(i=>i==e)!==-1)throw new Error("Cyclical dependency in update() call",{cause:t});x(r),g.push(r),k.push(e);let s;try{s=t(r,g,k)}finally{g.pop(),k.pop(),s instanceof Promise?s.then(i=>{e.current=i}):e.current=s}};return n.fn=t,X.set(e,n),n(),e}function Y(t){let e=X.get(t)?.deref();if(!e)return;x(e);let n=e.fn;y.remove(n),X.delete(t)}function Z(t){C++;let e;try{e=t()}finally{e instanceof Promise?e.then(()=>{C--,C||fe()}):(C--,C||fe())}return e}function fe(){let t=Array.from(q);q=new Set;let e=g[g.length-1];for(let n of t)n!=e&&n?.needsUpdate&&n(),ue(n)}function _(t,e){if(P.findIndex(l=>t==l)!==-1)throw new Error("Recursive update() call",{cause:t});P.push(t);let n=y.get(t);n||(n=w({current:null}),y.set(t,n));let r=!1,s=!0;return function l(){if(k.findIndex(o=>o==n)!==-1)throw new Error("Cyclical dependency in update() call",{cause:t});if(r&&r>Date.now()){s=!0;return}x(l),g.push(l),k.push(n);let a;try{a=t(l,g,k)}finally{s=!1,g.pop(),k.pop(),a instanceof Promise?a.then(o=>{n.current=o}):n.current=a}r=Date.now()+e,globalThis.setTimeout(()=>{s&&l()},e)}(),n}function $e(t,e){let n=y.get(t);n||(n=w({current:null}),y.set(t,n));let r=-1,s=!0;return function l(){if(r<e.time)if(s){x(l),g.push(l),r=e.time;let a;try{a=t(l,g)}finally{g.pop(),a instanceof Promise?a.then(o=>{n.current=o}):n.current=a,s=!1}}else r=e.time;else s=!0}(),n}function Ie(t){let e=g.slice();g=[];try{return t()}finally{g=e}}var ne=class{constructor(e){this.bindings=new Map;let n={container:document.body,attribute:"data-bind",transformers:[],defaultTransformers:{field:[je],list:[He],map:[Re]}};if(!e?.root)throw new Error("bind needs at least options.root set");this.options=Object.assign({},n,e);let r=this.options.attribute,s=[r+"-field",r+"-list",r+"-map"],i=`[${r}-field],[${r}-list],[${r}-map]`,l=f=>{let c=s.find(p=>f.hasAttribute(p));return c||console.error("No matching attribute found",f),c},a=f=>{this.bindings.set(f,_(()=>{let c={templates:f.querySelectorAll(":scope > template"),attribute:l(f)};c.path=this.getBindingPath(f),c.value=te(this.options.root,c.path),c.element=f,o(c)},100))},o=f=>{let c;switch(f.attribute){case this.options.attribute+"-field":c=this.options.defaultTransformers.field||[];break;case this.options.attribute+"-list":c=this.options.defaultTransformers.list||[];break;case this.options.attribute+"-map":c=this.options.defaultTransformers.map||[];break}f.element.dataset.transform&&f.element.dataset.transform.split(" ").filter(Boolean).forEach(d=>{this.options.transformers[d]?c.push(this.options.transformers[d]):console.warn("No transformer with name "+d+" configured",{cause:f.element})});let p;for(let d of c)p=((b,Te)=>ke=>Te.call(this,ke,b))(p,d);p(f)},h=f=>{for(let c of f)a(c)},u=f=>{let c=`[${r}-field],[${r}-list],[${r}-map]`;for(let p of f)if(p.type=="childList"&&p.addedNodes){for(let d of p.addedNodes)if(d instanceof HTMLElement){let b=Array.from(d.querySelectorAll(c));d.matches(c)&&b.unshift(d),b.length&&h(b)}}};this.observer=new MutationObserver(f=>{u(f)}),this.observer.observe(e.container,{subtree:!0,childList:!0});let m=this.options.container.querySelectorAll("["+this.options.attribute+"-field],["+this.options.attribute+"-list],["+this.options.attribute+"-map]");m.length&&h(m)}applyTemplate(e){let n=e.path,r=e.templates,s=e.list,i=e.index,l=e.parent,a=s?s[i]:e.value,o=this.findTemplate(r,a);if(!o){let c=new DocumentFragment;return c.innerHTML="<!-- no matching template -->",c}let h=o.content.cloneNode(!0);if(!h.children?.length)throw new Error("template must contain a single html element",{cause:o});if(h.children.length>1)throw new Error("template must contain a single root node",{cause:o});let u=this.options.attribute,m=[u+"-field",u+"-list",u+"-map"],f=h.querySelectorAll(`[${u}-field],[${u}-list],[${u}-map]`);for(let c of f){let p=m.find(b=>c.hasAttribute(b)),d=c.getAttribute(p);d.substring(0,6)==":root."?c.setAttribute(p,d.substring(6)):d==":value"&&i!=null?c.setAttribute(p,n+"."+i):i!=null?c.setAttribute(p,n+"."+i+"."+d):c.setAttribute(p,l+"."+d)}return typeof i<"u"&&h.children[0].setAttribute(u+"-key",i),h.children[0].$bindTemplate=o,h}getBindingPath(e){let n=[this.options.attribute+"-field",this.options.attribute+"-list",this.options.attribute+"-map"];for(let r of n)if(e.hasAttribute(r))return e.getAttribute(r)}findTemplate(e,n){let r=l=>{let a=this.getBindingPath(l),o;a?a.substr(0,6)==":root."?o=te(this.options.root,a):o=te(n,a):o=n;let h=""+o,u=l.getAttribute(this.options.attribute+"-match");if(u){if(u===":empty"&&!o)return l;if(u===":notempty"&&o||h.match(u))return l}if(!u&&o!==null&&o!==void 0)return l},s=Array.from(e).find(r),i=s?.getAttribute("rel");if(i){let l=document.querySelector("template#"+i);if(!l)throw new Error("Could not find template with id "+i);s=l}return s}destroy(){this.bindings.forEach(e=>{Y(e)}),this.bindings=new Map,this.observer.disconnect()}};function $(t){return new ne(t)}function L(t,e){return t==":empty"&&!e||e==":empty"&&!t||""+t==""+e}function te(t,e){let n=e.split("."),r=t,s,i;for(;n.length&&r;){if(s=n.shift(),s==":key")return i;if(s==":value")return r;s==":root"?r=t:(s=decodeURIComponent(s),r=r[s],i=s)}return r}function je(t){let e=t.element,n=t.templates,r=n.length,s=t.path,i=t.value,l=this.options.attribute;return n?.length?Fe.call(this,t):e.tagName=="INPUT"?Ve.call(this,t):e.tagName=="BUTTON"?De.call(this,t):e.tagName=="SELECT"?We.call(this,t):e.tagName=="A"?Ge.call(this,t):Je.call(this,t),t}function He(t){let e=t.element,n=t.templates,r=n.length,s=t.path,i=t.value,l=this.options.attribute;return Array.isArray(i)?n?.length?Ue.call(this,t):console.error("No templates found in",e):console.error("Value is not an array.",e,i),t}function Re(t){let e=t.element,n=t.templates,r=n.length,s=t.path,i=t.value,l=this.options.attribute;return typeof i!="object"?console.error("Value is not an object.",e,i):n?.length?Ke.call(this,t):console.error("No templates found in",e),t}function Ue(t){let e=t.element,n=t.templates,r=n.length,s=t.path,i=t.value,l=this.options.attribute,a=e.querySelectorAll(":scope > ["+l+"-key]"),o=0,h=0;t.list=i;for(let m of a){let f=parseInt(m.getAttribute(l+"-key"));if(f>o)t.index=o,e.insertBefore(this.applyTemplate(t),m);else if(f<o)m.remove();else{let c=Array.from(m.querySelectorAll(`[${l}]`));m.matches(`[${l}]`)&&c.unshift(m);let p=c.find(d=>{let b=d.getAttribute(l);return b.substr(0,5)!==":root"&&b.substr(0,s.length)!==s});if(!p&&m.$bindTemplate){let d=this.findTemplate(n,i[o]);d!=m.$bindTemplate&&(p=!0,d||h++)}p&&(t.index=o,e.replaceChild(this.applyTemplate(t),m))}if(o++,o>=i.length)break}a=e.querySelectorAll(":scope > ["+l+"-key]");let u=a.length+h;if(u>i.length)for(;u>i.length;)e.querySelectorAll(":scope > :not(template)")?.[u-1]?.remove(),u--;else if(u<i.length)for(;u<i.length;)t.index=u,e.appendChild(this.applyTemplate(t)),u++}function Ke(t){let e=t.element,n=t.templates,r=n.length,s=t.path,i=t.value,l=this.options.attribute;t.list=i;let a=Array.from(e.querySelectorAll(":scope > ["+l+"-key]"));for(let o in t.list){t.index=o;let h=a.shift();if(!h){e.appendChild(this.applyTemplate(t));continue}if(h.getAttribute[l+"-key"]!=o){a.unshift(h);let m=e.querySelector(":scope > ["+l+'-key="'+o+'"]');if(m)e.insertBefore(m,h),h=m,a=a.filter(f=>f!=m);else{let f=this.applyTemplate(t);f.firstElementChild&&e.insertBefore(f,h);continue}}if(this.findTemplate(n,i[o])!=h.$bindTemplate){let m=this.applyTemplate(t);e.replaceChild(m,h)}}for(;a.length;)item=a.shift(),item.remove()}function ze(t,e){let n=t.parentElement?.closest(`[${e}-list],[${e}-map]`);return n?n.hasAttribute(`${e}-list`)?n.getAttribute(`${e}-list`):n.getAttribute(`${e}-map`):":root"}function Fe(t){let e=t.element,n=t.templates,r=t.value,s=this.options.attribute,i=e.querySelector(":scope > :not(template)"),l=this.findTemplate(n,r);if(t.parent=ze(e,s),i)if(l){if(i?.$bindTemplate!=l){let a=this.applyTemplate(t);e.replaceChild(a,i)}}else e.removeChild(i);else if(l){let a=this.applyTemplate(t);e.appendChild(a)}}function Ve(t){let e=t.element,n=t.value;e.type=="checkbox"||e.type=="radio"?L(e.value,n)?e.checked=!0:e.checked=!1:L(e.value,n)||(e.value=""+n)}function De(t){let e=t.element,n=t.value;L(e.value,n)||(e.value=""+n)}function We(t){let e=t.element,n=t.value;if(e.multiple){if(Array.isArray(n))for(let r of e.options)n.indexOf(r.value)===!1?r.selected=!1:r.selected=!0}else{let r=e.options.find(s=>L(s.value,n));r&&(r.selected=!0)}}function Ge(t){let e=t.element,n=t.value;n?.innerHTML&&!L(e.innerHTML,n.innerHTML)&&(e.innerHTML=""+n.innerHTML),n?.href&&!L(e.href,n.href)&&(e.href=""+n.href)}function Je(t){let e=t.element,n=t.value;L(e.innerHTML,n)||(typeof n>"u"||n==null?e.innerHTML="":e.innerHTML=""+n)}var re=class{constructor(e={}){this.container=e.container||document.body,e.state||(e.state={}),this.state=w(e.state),e.commands&&(this.commands=F({app:this,container:this.container,commands:e.commands})),e.keys&&(this.keys=W({app:this,keys:e.keys})),e.routes&&(this.routes=U({app:this,routes:e.routes})),e.actions&&(this.actions=j({app:this,actions:e.actions}));let n={container:this.container,root:this.state};e.defaultTransformers&&(n.defaultTransformers=e.defaultTransformers),e.transformers&&(n.transformers=e.transformers),this.bind=$(n)}};function he(t={}){return new re(t)}function Qe(t,e){let n=0;return()=>{let r=arguments;n||(n=globalThis.setTimeout(()=>{t.apply(this,r),n=0},e))}}var Xe=globalThis.requestIdleCallback?t=>{globalThis.requestIdleCallback(t,{timeout:500})}:globalThis.requestAnimationFrame;function me(t,e){let n=new URL(t,e);return B.cacheBuster&&n.searchParams.set("cb",B.cacheBuster),n.href}var de,Ye={},se=globalThis.document.querySelector("head"),pe=globalThis.document.currentScript,ge,ye;pe?ye=pe.src:(ge=(()=>{var t=document.getElementsByTagName("script"),e=t.length-1,n=t[e];return()=>n.src})(),ye=ge());var Ze=async()=>new Promise(function(t){var e=globalThis.document.createElement("script");e.src="javascript:document.dispatchEvent(new Event('simply-include-next'))",e.async=!1,globalThis.document.addEventListener("simply-include-next",()=>{se.removeChild(e),t()},{once:!0,passive:!0}),se.appendChild(e)}),I=[],B={cacheBuster:null,scripts:(t,e)=>{let n=t.slice(),r=()=>{let s=n.shift();if(!s)return;let i=[].map.call(s.attributes,a=>a.name),l=globalThis.document.createElement("script");for(let a of i)l.setAttribute(a,s.getAttribute(a));if(l.removeAttribute("data-simply-location"),!l.src)l.innerHTML=s.innerHTML,Ze().then(()=>{let a=I[s.dataset.simplyLocation];a.parentNode.insertBefore(l,a),a.parentNode.removeChild(a),r()});else{l.src=me(l.src,e),!l.hasAttribute("async")&&!l.hasAttribute("defer")&&(l.async=!1);let a=I[s.dataset.simplyLocation];a.parentNode.insertBefore(l,a),a.parentNode.removeChild(a),Ye[l.src]=!0,r()}};n.length&&r()},html:(t,e)=>{let n=globalThis.document.createRange().createContextualFragment(t),r=n.querySelectorAll('link[rel="stylesheet"],style');for(let l of r)l.href&&(l.href=me(l.href,e.href)),se.appendChild(l);let s=globalThis.document.createDocumentFragment(),i=n.querySelectorAll("script");for(let l of i){let a=globalThis.document.createComment(l.src||"inline script");l.parentNode.insertBefore(a,l),l.dataset.simplyLocation=I.length,I.push(a),s.appendChild(l)}e.parentNode.insertBefore(n,e||null),globalThis.setTimeout(function(){B.scripts(s.childNodes,e?e.href:globalThis.location.href)},10)}},be={},_e=async t=>{let e=[].reduce.call(t,(n,r)=>(r.rel=="simply-include-once"&&be[r.href]?r.parentNode.removeChild(r):(be[r.href]=!0,r.rel="simply-include-loading",n.push(r)),n),[]);for(let n of e){if(!n.href)return;let r=await fetch(n.href);if(!r.ok){console.log("simply-include: failed to load "+n.href);continue}console.log("simply-include: loaded "+n.href);let s=await r.text();B.html(s,n),n.parentNode.removeChild(n)}},we=Qe(()=>{Xe(()=>{var t=globalThis.document.querySelectorAll('link[rel="simply-include"],link[rel="simply-include-once"]');t.length&&_e(t)})}),et=()=>{de=new MutationObserver(we),de.observe(globalThis.document,{subtree:!0,childList:!0})};et();we();var le={};S(le,{columns:()=>it,filter:()=>st,model:()=>tt,paging:()=>rt,sort:()=>nt});var ie=class{constructor(e){this.state=w(e),this.state.options||(this.state.options={}),this.effects=[{current:e.data}],this.view=w(e.data)}addEffect(e){let n=this.effects[this.effects.length-1];this.view=e.call(this,n),this.effects.push(this.view)}};function tt(t){return new ie(t)}function nt(t={}){return function(e){return this.state.options.sort=Object.assign({direction:"asc",sortBy:null,sortFn:(n,r)=>{let s=this.state.options.sort,i=s.sortBy;if(!s.sortBy)return 0;let l=s.direction=="asc"?1:-1,a=s.direction=="asc"?-1:1;return typeof n?.[i]>"u"?typeof r?.[i]>"u"?0:l:typeof r?.[i]>"u"||n[i]<r[i]?a:n[i]>r[i]?l:0}},t),M(()=>{let n=this.state.options.sort;return n?.sortBy&&n?.direction?e.current.toSorted(n?.sortFn):e.current})}}function rt(t={}){return function(e){return this.state.options.paging=Object.assign({page:1,pageSize:20,max:1},t),M(()=>Z(()=>{let n=this.state.options.paging;n.pageSize||(n.pageSize=20),n.max=Math.ceil(this.state.data.length/n.pageSize),n.page=Math.max(1,Math.min(n.max,n.page));let r=(n.page-1)*n.pageSize,s=r+n.pageSize;return e.current.slice(r,s)}))}}function st(t){if(!t?.name||typeof t.name!="string")throw new Error("filter requires options.name to be a string");if(!t.matches||typeof t.matches!="function")throw new Error("filter requires options.matches to be a function");return function(e){return this.state.options[t.name]=t,M(()=>{if(this.state.options[t.name].enabled)return e.filter(this.state.options.matches)})}}function it(t={}){if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("columns requires options to be an object with at least one property");return function(e){return this.state.options.columns=t,M(()=>e.current.map(n=>{let r={};for(let s of Object.keys(this.state.options.columns))this.state.options.columns[s].hidden||(r[s]=n[s]);return r}))}}var ve={activate:ae,action:H,app:he,bind:$,command:V,include:B,key:G,model:le,route:K,state:ee};window.simply=ve;var At=ve;})();
//# sourceMappingURL=simply.everything.min.js.map
